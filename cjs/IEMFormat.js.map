{"version":3,"sources":["../build/IEMFormat.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","IEMFormat","shortName","getName","getDescription","container_type","ContainerType","JSON","test","obj","hasOwnProperty","Decoder","parse","filename","carry","add","ADD","name","Name","description","Description","author","LoudspeakerLayout","ParseError","date_str","split","trim","ampm","slice","date","Date","setHours","getHours","setDate","e","now","toISOString","messages","push","ParserMessage","ParserMessageLevels","warn","mat","Matrix","ExpectedInputNormalization","WeightsAlreadyApplied","Weights","setWeighting","toLowerCase","console","log","addMatrix","num_outputs","Loudspeakers","reduce","val","spk","IsImaginary","num_imags","decoder","output","summing_matrix","Array","fill","forEach","speaker","index","addOutput","OutputChannel","AEDCoord","Azimuth","Elevation","Radius","Routing","ch","Gain","valid","results","incomplete_results","fromADD","opts","iem","matrices","getNormalization","weights","channels","coords","a","isImag","Channel","gainForChannel","removeNullSpeakers","matrix","prettify","use","stringify","new_chs","chIsImag","summing_matrixWidth","is_null","arr"],"mappings":"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","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { _static_implements, ContainerType } from './ADCFormat';\nimport { ParserMessage, ParserMessageLevels } from './Converter';\nimport { ADD, Matrix, OutputChannel, AEDCoord } from 'dotadd.js';\nimport { ParseError } from './Util';\nlet IEMFormat = class IEMFormat {\n    static shortName() {\n        return \"iem\";\n    }\n    static getName() {\n        return \"IEM AllRad Decoder Configuration Files\";\n    }\n    static getDescription() {\n        return \"Exported and imported by the IEM Allrad decoder. Can also be read by the IEM Simple Decoder\";\n    }\n    static container_type() {\n        return ContainerType.JSON;\n    }\n    static test(obj) {\n        return obj.hasOwnProperty('Name')\n            && obj.hasOwnProperty(\"Description\")\n            && obj.hasOwnProperty(\"Decoder\")\n            && obj.Decoder.hasOwnProperty(\"Weights\");\n    }\n    static parse(obj, filename, carry) {\n        let add = new ADD({\n            name: obj.Name,\n            description: obj.Description,\n            author: \"IEM Graz\",\n        });\n        if (!obj.LoudspeakerLayout)\n            throw new ParseError(filename, \"No Loudspeaker Layout found.\");\n        if (!obj.Decoder)\n            throw new ParseError(filename, \"No Decoder found in File\");\n        let date_str = obj.Description.split(\".\")[obj.Description.split(\".\").length - 1].trim();\n        let ampm = date_str.slice(-2);\n        let date = new Date(date_str.slice(0, -2));\n        date.setHours(date.getHours() + ((ampm == 'pm') ? 12 : 0));\n        try {\n            add.setDate(date);\n        }\n        catch (e) {\n            add.setDate(new Date(Date.now()).toISOString());\n            carry.messages.push(new ParserMessage(\"Could not read Date value from description string\", ParserMessageLevels.warn));\n        }\n        let mat = new Matrix(obj.Decoder.ExpectedInputNormalization, obj.Decoder.Matrix);\n        if (obj.Decoder.WeightsAlreadyApplied && obj.Decoder.Weights && obj.Decoder.Weights != \"none\")\n            mat.setWeighting(obj.Decoder.Weights.toLowerCase());\n        console.log(mat);\n        add.addMatrix(mat);\n        let num_outputs = obj.LoudspeakerLayout.Loudspeakers\n            .reduce((val, spk) => val + +!spk.IsImaginary, 0);\n        let num_imags = obj.LoudspeakerLayout.Loudspeakers\n            .reduce((val, spk) => val + spk.IsImaginary, 0);\n        add.decoder.output.summing_matrix = [];\n        for (let i = 0; i < obj.LoudspeakerLayout.Loudspeakers.length; ++i)\n            add.decoder.output.summing_matrix.push(new Array(num_outputs).fill(0));\n        obj.LoudspeakerLayout.Loudspeakers.forEach((speaker, index) => add.addOutput(new OutputChannel(`${(obj.LoudspeakerLayout.Name.length) ?\n            obj.LoudspeakerLayout.Name : \"spk\"} ${index}${(speaker.IsImaginary) ? \" [IMAG]\" : \"\"}`, 'spk', new AEDCoord(speaker.Azimuth, speaker.Elevation, speaker.Radius))));\n        obj.Decoder.Routing.forEach((ch, index) => {\n            add.decoder.output.summing_matrix[ch - 1][index]\n                = obj.LoudspeakerLayout.Loudspeakers[ch - 1].Gain;\n        });\n        if (add.valid())\n            carry.results.push(add);\n        else\n            carry.incomplete_results.push(add);\n    }\n    static fromADD(add, opts) {\n        let iem = {\n            Name: add.name,\n            Description: add.description,\n            Decoder: {\n                Name: add.name,\n                Description: add.description,\n                ExpectedInputNormalization: add.decoder.matrices[0].getNormalization(),\n                Weights: (add.decoder.matrices[0].weights) ? add.decoder.matrices[0].weights : \"none\",\n                WeightsAlreadyApplied: (add.decoder.matrices[0].weights) ? true : false,\n                Matrix: [],\n                Routing: []\n            },\n            LoudspeakerLayout: {\n                Name: add.name + '_layout',\n                Loudspeakers: []\n            }\n        };\n        add.decoder.output.channels.forEach((ch, i) => {\n            let spk = {\n                Azimuth: (ch.coords) ? ch.coords.a || 0 : 0,\n                Elevation: (ch.coords) ? ch.coords.e || 0 : 0,\n                Radius: (ch.coords) ? ch.coords.d || 1 : 0,\n                IsImaginary: isImag(add, i),\n                Channel: i + 1,\n                Gain: gainForChannel(add, i)\n            };\n            if (!isImag(add, i))\n                iem.Decoder.Routing.push(i + 1);\n            iem.LoudspeakerLayout.Loudspeakers.push(spk);\n        });\n        removeNullSpeakers(add);\n        iem.Decoder.Matrix = add.decoder.matrices[0].matrix;\n        let prettify = opts.use('prettify');\n        if (prettify)\n            return JSON.stringify(iem, null, 4);\n        else\n            return JSON.stringify(iem);\n    }\n};\nIEMFormat = __decorate([\n    _static_implements()\n], IEMFormat);\nexport default IEMFormat;\nfunction removeNullSpeakers(add) {\n    let new_chs = [];\n    add.decoder.matrices[0].matrix.forEach((ch, i) => {\n        if (chIsImag(add, i))\n            new_chs.push(ch);\n    });\n    add.decoder.matrices[0].matrix = new_chs;\n}\nfunction summing_matrixWidth(add) {\n    return add.decoder.output.summing_matrix[0].length;\n}\nfunction isImag(add, index) {\n    return add.decoder.output.summing_matrix[index]\n        .reduce((is_null, val) => is_null && (val == 0), true);\n}\nfunction chIsImag(add, index) {\n    return !add.decoder.matrices[0].matrix[index].reduce((is_null, val) => is_null && (val == 0), true);\n}\nfunction gainForChannel(add, index) {\n    return add.decoder.output.summing_matrix[index]\n        .reduce((val, arr) => val + arr, 0);\n}\n"],"file":"IEMFormat.js"}